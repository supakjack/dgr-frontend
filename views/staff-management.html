<p class="text-light" style="z-index: 1; position: absolute;left: 20px;
top: 110px;"><a href="#/library" class="text-light text-decoration-none">คลังข้อมูลกำลัังผลิตน้ำ</a> &nbsp;/&nbsp;<a
        class="text-light" href="#/staff-management">รายการลงทะเบียนขอรับน้ำดื่มส่วนกลาง</a></p>
<img src="assets/images/themes/staff-report-01.png" class="img-fluid" alt="...">
<div class="text-center mt-5 mb-5 ">
    <span class="fs-1">รายการลงทะเบียนขอรับน้ำดื่มส่วนกลาง</span>
</div>

<div class="row pb-5 ">
    <!-- start table user -->
    <table id="table_water_application_management" class="table display" style="width:100%">
        <thead>
            <tr class="text-center">
                <th>จังหวัด</th>
                <th>ผู้ลงทะเบียน</th>
                <th>ขวด 350 มล.</th>
                <th>ขวด 750 มล.</th>
                <th>ขวด 1500 มล.</th>
                <th>แกลอน 5 ล.</th>
                <th>แกลอน 20 ล.</th>
                <th>วันที่ลงทะเบียน</th>
                <th>สถานะ</th>
                <th>เครื่องมือ</th>
            </tr>
        </thead>
    </table>
    <!-- end table user -->
</div>

<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog  modal-dialog-centered  modal-xl modal-fullscreen-sm-down">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">ข้อมูลลงทะเบียนขอรับน้ำดื่ม</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="row mb-3">
                        <div class="col-xl-6 col-sm-12">
                            <label class="form-label">ชื่อ</label>
                            <input type="text" value="กอญ่า มัจฉะ" class="form-control" disabled>
                        </div>
                        <div class="col-xl-6 col-sm-12">
                            <label class="form-label">เบอร์โทรศัพท์</label>
                            <input type="text" value="097-6780699" class="form-control" disabled>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-xl-6 col-sm-12">
                            <label class="form-label">ลงวันที่:</label>
                            <input type="text" value="09/06/2564" class="form-control" disabled>
                        </div>
                        <div class="col-xl-6 col-sm-12">
                            <label class="form-label">สถานะ</label>
                            <input type="text" value="อนุมัติ" class="form-control" disabled>
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-sm-12">
                            <label for="exampleFormControlTextarea1" class="form-label">ทีอยู่</label>
                            <textarea class="form-control" id="exampleFormControlTextarea1" rows="3"
                                disabled>169 ถนน ลงหาดบางแสน ตำบลแสนสุข อำเภอเมืองชลบุรี ชลบุรี 20131</textarea>
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-xl-6 col-sm-12">
                            <label class="form-label">น้ำขวดขนาด 350 มล.</label>
                            <input type="number" value="10" class="form-control" disabled>
                        </div>
                        <div class="col-xl-6 col-sm-12">
                            <label class="form-label">น้ำขวดขนาด 750 มล.</label>
                            <input type="number" value="0" class="form-control" disabled>
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-xl-6 col-sm-12">
                            <label class="form-label">น้ำขวดขนาด 1500 มล.</label>
                            <input type="number" value="10" class="form-control" disabled>
                        </div>
                        <div class="col-xl-6 col-sm-12">
                            <label class="form-label">น้ำแกลอน 5 ล.</label>
                            <input type="number" value="0" class="form-control" disabled>
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-xl-6 col-sm-12">
                            <label class="form-label">น้ำแกลอน 20 ล.</label>
                            <input type="number" value="0" class="form-control" disabled>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <div class="d-grid gap-2 col-xl-6 col-md-12 mx-auto p-2">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ย้อนกลับ</button>
                </div>
            </div>
        </div>
    </div>
</div>

<script>

    data = [
        {
            "id": "1",
            "name": "กอญ่า มัจฉะ",
            "province": "ลำปาง",
            "350_ml": "1",
            "750_ml": "2",
            "1500_ml": "3",
            "5_l": "4",
            "20_l": "5",
            "create_date": "2021-06-18 20:46:06",
            "status": "อนุมัติ",
        },
        {
            "id": "2",
            "name": "สมชาย มาดี",
            "province": "เชียงราย",
            "350_ml": "1",
            "750_ml": "2",
            "1500_ml": "3",
            "5_l": "4",
            "20_l": "5",
            "create_date": "2021-05-18 20:46:06",
            "status": "รออนุมัติ",
        },
        {
            "id": "4",
            "name": "สมหญิง มาดี",
            "province": "ลำปาง",
            "350_ml": "1",
            "750_ml": "2",
            "1500_ml": "3",
            "5_l": "4",
            "20_l": "5",
            "create_date": "2021-05-18 20:46:06",
            "status": "รออนุมัติ",
        }, {
            "id": "6",
            "name": "สมศรี มาดี",
            "province": "เชียงราย",
            "350_ml": "1",
            "750_ml": "2",
            "1500_ml": "3",
            "5_l": "4",
            "20_l": "5",
            "create_date": "2021-05-18 20:46:06",
            "status": "รออนุมัติ",
        },
        {
            "id": "1",
            "name": "มานี มัจฉะ",
            "province": "พะเยา",
            "350_ml": "1",
            "750_ml": "2",
            "1500_ml": "3",
            "5_l": "4",
            "20_l": "5",
            "create_date": "2021-04-18 20:46:06",
            "status": "อนุมัติ",
        },
        {
            "id": "2",
            "name": "มาโนด มาดี",
            "province": "ลำปาง",
            "350_ml": "1",
            "750_ml": "2",
            "1500_ml": "3",
            "5_l": "4",
            "20_l": "5",
            "create_date": "2021-03-18 20:46:06",
            "status": "รออนุมัติ",
        },
        {
            "id": "4",
            "name": "มานัด มาดี",
            "province": "ลำปาง",
            "350_ml": "1",
            "750_ml": "2",
            "1500_ml": "3",
            "5_l": "4",
            "20_l": "5",
            "create_date": "2021-02-18 20:46:06",
            "status": "รออนุมัติ",
        }, {
            "id": "6",
            "name": "มณี มาดี",
            "province": "ลำปาง",
            "350_ml": "1",
            "750_ml": "2",
            "1500_ml": "3",
            "5_l": "4",
            "20_l": "5",
            "create_date": "2021-01-18 20:46:06",
            "status": "รออนุมัติ",
        },
    ]

    console.log(data);

    $('#table_water_application_management').DataTable({
        responsive: true,
        pageLength: 5,
        "lengthMenu": [[5, 10, 20, -1], [5, 10, 20, "All"]],
        data: data,
        "columnDefs": [{
            "targets": 0,
            "data": "name",
            "render": function (data, type, row, meta) {
                return '<div class="pl-5 d-flex justify-content-start align-items-center"><i class="bi bi-person-circle" style="font-size: 50px" ></i> &emsp; <span value="' + data + '">' + data + '</span></div>'

            }
        },
        {
            "targets":1,
            "data": "province",
            "render": function (data, type, row, meta) {
                return '<div class="pl-5 d-flex justify-content-center align-items-center">' + data + '</span></div>'

            }
        },
        {
            "targets": 2,
            "data": "350_ml",
            "render": function (data, type, row, meta) {
                return '<div class="pl-5 d-flex justify-content-center align-items-center">' + data + ' ขวด</span></div>'

            }
        },
        {
            "targets": 3,
            "data": "750_ml",
            "render": function (data, type, row, meta) {
                return '<div class="pl-5 d-flex justify-content-center align-items-center">' + data + ' ขวด</span></div>'

            }
        },
        {
            "targets": 4,
            "data": "1500_ml",
            "render": function (data, type, row, meta) {
                return '<div class="pl-5 d-flex justify-content-center align-items-center">' + data + ' ขวด</span></div>'

            }
        },
        {
            "targets": 5,
            "data": "5_l",
            "render": function (data, type, row, meta) {
                return '<div class="pl-5 d-flex justify-content-center align-items-center">' + data + ' แกลอน</span></div>'

            }
        },
        {
            "targets": 6,
            "data": "20_l",
            "render": function (data, type, row, meta) {
                return '<div class="pl-5 d-flex justify-content-center align-items-center">' + data + ' แกลอน</span></div>'

            }
        },
        {
            "targets": 7,
            "data": "create_date",
            "render": function (data, type, row, meta) {
                return `<div  class="d-flex justify-content-center mt-4"> <p> ${data}</p> </div>`
            }
        },
        {
            "targets": 8,
            "data": "status",
            "render": function (data, type, row, meta) {
                return `<div class=" align-items-center mt-4 text-center">
                                        <span class="fs-6 badge ${data == 'รออนุมัติ' ? 'bg-warning' : 'bg-success'}" value="${data}">${data}</span> 
                                    </div>`
            }
        },
        {
            "targets": 9,
            "data": "id",
            "render": function (data, type, row, meta) {
                return `


                <div class="d-flex flex-wrap justify-content-evenly align-items-center">
                            <button style="min-width:155px;" class="mt-3 btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
                                <i class="bi bi-tools"></i> &nbspดำเนินการ
                            </button>
                            <ul class="dropdown-menu dropdown-menu-dark dropdown-menu-lg-end" aria-labelledby="dropdownMenuButton1">
                                <li >
                                        <a class="dropdown-item" data-bs-toggle="modal" data-bs-target="#exampleModal" href="#"><i class="bi bi-eye"></i> ดูรายละเอียด</a>
                                    </li>
                                <li>
                                        ${row.status == 'รออนุมัติ' ? '<a class="dropdown-item approveReq" href="#"><i class="bi bi-check"></i> อนุมัติคำร้อง </a> ' : ''}
                                    </li>
                            </ul>
                        <button style="min-width:155px;" type="button" class="mt-3 btn btn-danger deleteReq"><i class="bi bi-trash"></i> ลบ</button>
                    </div>
                            `
            }
        }
        ]
    });
    wait_load_page()
    $('.deleteReq').click(function (e) {
        e.preventDefault();
        const swalWithBootstrapButtons = Swal.mixin({
            customClass: {
                confirmButton: 'btn btn-success',
                cancelButton: 'btn btn-danger'
            },
            buttonsStyling: false
        })

        swalWithBootstrapButtons.fire({
            title: 'คุณแน่ใจไหม ?',
            text: "คุณกำลังจะลบ 1 รายการ",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonText: 'ใช่, ลบเลย!',
            cancelButtonText: 'ไม่, ยกเลิก!',
            reverseButtons: true
        }).then((result) => {
            if (result.isConfirmed) {
                swalWithBootstrapButtons.fire(
                    'ลบ!',
                    '1 รายการของคุณถูกลบแล้ว',
                    'success'
                )
            } else if (
                /* Read more about handling dismissals below */
                result.dismiss === Swal.DismissReason.cancel
            ) {
                swalWithBootstrapButtons.fire(
                    'ยกเลิก',
                    '1 รายการของคุณไม่ถูกลบ',
                    'error'
                )
            }
        })
    });

    $('.approveReq').click(function (e) {
        e.preventDefault();
        const swalWithBootstrapButtons = Swal.mixin({
            customClass: {
                confirmButton: 'btn btn-success',
                cancelButton: 'btn btn-danger'
            },
            buttonsStyling: false
        })

        swalWithBootstrapButtons.fire({
            title: 'คุณแน่ใจไหม ?',
            text: "คุณกำลังจะอนุมัติ 1 รายการ",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonText: 'ใช่, อนุมัติเลย!',
            cancelButtonText: 'ไม่, ยกเลิก!',
            reverseButtons: true
        }).then((result) => {
            if (result.isConfirmed) {
                swalWithBootstrapButtons.fire(
                    'อนุมัติ!',
                    '1 รายการของคุณถูกอนุมัติแล้ว',
                    'success'
                )
            } else if (
                /* Read more about handling dismissals below */
                result.dismiss === Swal.DismissReason.cancel
            ) {
                swalWithBootstrapButtons.fire(
                    'ยกเลิก',
                    '1 รายการของคุณไม่ถูกอนุมัติ',
                    'error'
                )
            }
        })
    });
</script>